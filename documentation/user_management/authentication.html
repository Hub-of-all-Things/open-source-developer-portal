<!DOCTYPE html><html class=no-js><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Authentication | Hub of All Things API</title><meta name=description content=Authentication><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/main.acde.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Roboto+Slab:300|Open+Sans:300,400,600,700"><script src=/js/head-scripts.e78f.js></script><script src=https://cdn.statuspage.io/se-v2.js></script></head><body><!--[if lt IE 8]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><header><div class="header__primary js-two-col-header-primary"><div class=page-wrap><div><a href=https://www.hubofallthings.com class="logo icon-logo-hat-white">Hub of All Things</a><div class=hamburger><a href="https://hubofallthings.com/main/what-is-the-hat/">What is the HAT</a> <a class="btn primary js-hamburger">Menu</a></div></div><nav class=js-hamburger-nav><a href="https://www.hatdex.org/">Data Exchange</a> <a href="https://hatcommunity.org/">Community Foundation</a> <a href="/">Developers</a> <a href="https://hatresearch.org/">Research</a> <a href="https://innovation.hubofallthings.com/">Innovation</a> <a class="btn primary" href="https://hubofallthings.com/">Learn More</a></nav></div></div><nav class="header__secondary js-two-col-nav-toggle"><div class=js-two-col-header-secondary><div class=page-wrap><a href=/documentation/what_is_hat_and_why_build_on_it.html class="no-nav js-two-col-no-toggle">Home</a> <a href="/documentation/" class=active>Documentation</a> <a href=https://github.com/Hub-of-all-Things class="no-nav js-two-col-no-toggle">Repositories</a><div class="custom-select custom-select--blue js-global-language-select"><select name=select class=js-language-select><option value=raw>raw</option><option value=php>php</option><option value=ruby>ruby</option><option value=python>python</option><option value=javascript>javascript</option></select><div class=arrow></div></div></div></div></nav></header><div class=content><div class=cnt-two-col><div class=page-wrap><section class="cnt-two-col__nav js-two-col-nav"><div class=close><button class="js-two-col-nav-close icon-cnt-two-col-close"></button></div><div class=language-picker><h6>Language</h6><div class="custom-select custom-select--blue"><select class=js-language-select name=select><option value=raw>raw</option><option value=php selected>php</option><option value=ruby>ruby</option><option value=python>python</option><option value=javascript>javascript</option></select><div class=arrow></div></div></div><!-- nav elements below should be in the same order of the secondary navigation --><nav class="side-nav js-side-nav active"><section><h6>Introduction</h6><ul><li><a href=/documentation/about_the_hat.html>About the HAT</a><ul></ul></li><li><a href=/documentation/case_studies.html>Case Studies</a><ul></ul></li><li><a href=/documentation/certification.html>Certification</a><ul></ul></li><li><a href=/documentation/how_to_build_a_data_plug.html>How to Build a Data Plug</a><ul></ul></li><li><a href=/documentation/knowing_the_hat_tech_ecosystem.html>Knowing the HAT Tech Ecosystem</a><ul></ul></li><li><a href=/documentation/license.html>License</a><ul></ul></li><li><a href=/documentation/other_resources.html>Other Resources</a><ul><li><a href=/documentation/other_resources/hat_code_of_practice_security_requirement.html>HAT Code of Practice Security Requirement</a></li></ul></li><li><a href=/documentation/the_api.html>The API</a><ul></ul></li><li><a href=/documentation/tools_available.html>Tools Available</a><ul></ul></li><li><a href=/documentation/tutorials.html>Tutorials</a><ul></ul></li><li><a href=/documentation/what_is_hat_and_why_build_on_it.html>What is the HAT and why build on it?</a><ul></ul></li></ul><h6>Endpoints</h6><ul><li><a href=/documentation/raw_data_input_and_output.html>Raw Data Input and Output</a><ul><li><a href=/documentation/raw_data_input_and_output/data_field.html>Data Field</a></li><li><a href=/documentation/raw_data_input_and_output/data_sources.html>Data Sources</a></li><li><a href=/documentation/raw_data_input_and_output/data_tables.html>Data Tables</a></li><li><a href=/documentation/raw_data_input_and_output/data_value.html>Data Value</a></li><li><a href=/documentation/raw_data_input_and_output/retrieving_raw_data.html>Retrieving Raw Data</a></li></ul></li><li><a href=/documentation/sharing_and_direct_data_debits.html>Sharing and Direct Data Debits</a><ul></ul></li><li><a href=/documentation/user_management.html class=active>User Management</a><ul><li><a href=/documentation/user_management/authentication.html class=active>Authentication</a></li><li><a href=/documentation/user_management/direct_data_credit_and_debit_accounts.html>Direct Data Credit and Debit Accounts</a></li></ul></li></ul><h6>Other Resources</h6><ul><li class=external-link><a href=https://hatters.hubofallthings.com target=_blank><span class=icon-sidenav-option>Get a HAT</span></a></li><li class=external-link><a href=http://forum.hatcommunity.org/c/developers target=_blank><span class=icon-sidenav-option>Developer Forum</span></a></li></ul></section></nav></section><section class=cnt-two-col__content><h1 id=authentication>Authentication</h1><p>For both the Data import and export, the virtualised database will required permissions to ensure that a User has authorised certain API consumers to add or read the data from the various Tables within the database. For this, separate “Apps” that represent API User accounts will be present within each User’s PDS. Each App will own several permission sets within the database, which will determine which Tables the API consumers are able to access, in addition to the permissions the API consumers have on those Tables.</p><h3 id=acquiring-access-token>Acquiring Access Token</h3><p>The tokens used are JWT tokens and you can see the values set by the HAT (such as the issuer) at jwt.io. To acquire an access token, you should make a GET request to /user/access_token endpoint and the request should contain headers with username and pass (password). The response will contain the access token and user ID.</p><h3 id=validating-access-token>Validating Access Token</h3><p>Tokens are signed by the HAT’s public key using RSA algorithm so that their authenticity can be independently verified. To make sure the provided access token works with the specific HAT, make a GET request containing a header with X-Auth-Token to /users/access_token/validate endpoint. In case of a valid access token, your response will say &ldquo;message&rdquo;: &ldquo;Authenticated&rdquo; and in a case of an invalid access token, you will get &ldquo;message&rdquo;: &ldquo;The supplied authentication is invalid&rdquo; and &ldquo;cause&rdquo;: &ldquo;&hellip;&rdquo;.</p><h3 id=http-request>HTTP Request</h3><p>GET http://hat.hubofallthings.net/</p><h3 id=query-parameters>Query Parameters</h3><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>access_token</td><td>your access token used to authenticate</td></tr><tr><td>username</td><td>username used for authentication together with password, instead of access_token (user and platform only)</td></tr><tr><td>pass</td><td>password used for authentication together with username, instead of access_token (user and platform only)</td></tr></tbody></table><h3 id=creating-a-hat>Creating a HAT</h3><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>curl --request POST \
  --url https:///api/signup \
  --header 'content-type: application/json' \
  --data '&quot;{\n\t\&quot;fullName\&quot;: \&quot; \&quot;,\n\t\&quot;username\&quot;: \&quot;\&quot;,\n\t\&quot;email\&quot;: \&quot;\&quot;,\n\t\&quot;pass\&quot;: \&quot;\&quot;,\n\t\&quot;passRepeat\&quot;: \&quot;\&quot;\n}&quot;'
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript>var settings = {
  &quot;async&quot;: true,
  &quot;crossDomain&quot;: true,
  &quot;url&quot;: &quot;https:///api/signup&quot;,
  &quot;method&quot;: &quot;POST&quot;,
  &quot;headers&quot;: {
    &quot;content-type&quot;: &quot;application/json&quot;
  },
  &quot;processData&quot;: false,
  &quot;data&quot;: &quot;\&quot;{\\n\\t\\\&quot;fullName\\\&quot;: \\\&quot; \\\&quot;,\\n\\t\\\&quot;username\\\&quot;: \\\&quot;\\\&quot;,\\n\\t\\\&quot;email\\\&quot;: \\\&quot;\\\&quot;,\\n\\t\\\&quot;pass\\\&quot;: \\\&quot;\\\&quot;,\\n\\t\\\&quot;passRepeat\\\&quot;: \\\&quot;\\\&quot;\\n}\&quot;&quot;
}

$.ajax(settings).done(function (response) {
  console.log(response);
});
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php>&lt;?php

$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL =&gt; &quot;https:///api/signup&quot;,
  CURLOPT_RETURNTRANSFER =&gt; true,
  CURLOPT_ENCODING =&gt; &quot;&quot;,
  CURLOPT_MAXREDIRS =&gt; 10,
  CURLOPT_TIMEOUT =&gt; 30,
  CURLOPT_HTTP_VERSION =&gt; CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST =&gt; &quot;POST&quot;,
  CURLOPT_POSTFIELDS =&gt; &quot;\&quot;{\\n\\t\\\&quot;fullName\\\&quot;: \\\&quot; \\\&quot;,\\n\\t\\\&quot;username\\\&quot;: \\\&quot;\\\&quot;,\\n\\t\\\&quot;email\\\&quot;: \\\&quot;\\\&quot;,\\n\\t\\\&quot;pass\\\&quot;: \\\&quot;\\\&quot;,\\n\\t\\\&quot;passRepeat\\\&quot;: \\\&quot;\\\&quot;\\n}\&quot;&quot;,
  CURLOPT_HTTPHEADER =&gt; array(
    &quot;content-type: application/json&quot;
  ),
));

$response = curl_exec($curl);
$err = curl_error($curl);

curl_close($curl);

if ($err) {
  echo &quot;cURL Error #:&quot; . $err;
} else {
  echo $response;
}
</code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python>import http.client

conn = http.client.HTTPSConnection(&quot;&quot;)

payload = &quot;\&quot;{\\n\\t\\\&quot;fullName\\\&quot;: \\\&quot; \\\&quot;,\\n\\t\\\&quot;username\\\&quot;: \\\&quot;\\\&quot;,\\n\\t\\\&quot;email\\\&quot;: \\\&quot;\\\&quot;,\\n\\t\\\&quot;pass\\\&quot;: \\\&quot;\\\&quot;,\\n\\t\\\&quot;passRepeat\\\&quot;: \\\&quot;\\\&quot;\\n}\&quot;&quot;

headers = { 'content-type': &quot;application/json&quot; }

conn.request(&quot;POST&quot;, &quot;/api/signup&quot;, payload, headers)

res = conn.getresponse()
data = res.read()

print(data.decode(&quot;utf-8&quot;))
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby>require 'uri'
require 'net/http'

url = URI(&quot;https:///api/signup&quot;)

http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

request = Net::HTTP::Post.new(url)
request[&quot;content-type&quot;] = 'application/json'
request.body = &quot;\&quot;{\\n\\t\\\&quot;fullName\\\&quot;: \\\&quot; \\\&quot;,\\n\\t\\\&quot;username\\\&quot;: \\\&quot;\\\&quot;,\\n\\t\\\&quot;email\\\&quot;: \\\&quot;\\\&quot;,\\n\\t\\\&quot;pass\\\&quot;: \\\&quot;\\\&quot;,\\n\\t\\\&quot;passRepeat\\\&quot;: \\\&quot;\\\&quot;\\n}\&quot;&quot;

response = http.request(request)
puts response.read_body
</code></pre></div></div><hr><section class=copyright><div class=page-wrap><div><span>© 2017 HAT Data Exchange Ltd.</span> <a href=/sitemap>Sitemap</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="https://hubofallthings.com/main/cookie-policy/">Cookie Policy</a></div></div></section></section></div></div></div><script src=//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script>window.jQuery || document.write('<script src="/_bower_components/jquery/jquery.min.js"><\/script>')</script><script src=/js/script.44e4.js></script></body></html>