<!DOCTYPE html><html class=no-js><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Data Input | Hub of All Things API</title><meta name=description content="Saving data into the HAT"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/main.ee1d.css><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><link rel=stylesheet href="//fonts.googleapis.com/css?family=Roboto+Slab:300|Open+Sans:300,400,600,700"><script src=/js/head-scripts.e78f.js></script><script src=https://cdn.statuspage.io/se-v2.js></script><!-- Code highlighting --><link rel=stylesheet href=/lib/code-highlight/styles/atom-one-dark.css><script src=/lib/code-highlight/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script></head><body><!--[if lt IE 8]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><header><div class="header__primary js-two-col-header-primary"><div class=page-wrap><div><a href="/" class="logo icon-logo-hat-white">Hub of All Things</a><div class=hamburger><a href=http://hubofallthings.com/c/about>What is the HAT</a> <a class="btn primary js-hamburger">Menu</a></div></div><nav class=js-hamburger-nav><a href="/">Developers</a> <a href="https://www.hatdex.org/">Data Exchange</a> <a href="https://hatcommunity.org/">Community Foundation</a> <a class="btn primary" href="https://hubofallthings.com/">Hub of All Things</a></nav></div></div><nav class="header__secondary js-two-col-nav-toggle"><div class=js-two-col-header-secondary><div class=page-wrap><a href="/home/">Resources</a> <a href="/guides/" class=active>Guides</a> <a href="/documentation/">API docs</a><!-- <a href="/tutorials/" >Tutorials</a> --> <a href=https://github.com/Hub-of-all-Things class="no-nav js-two-col-no-toggle">Repositories</a><div class="custom-select custom-select--blue js-global-language-select"><select name=select class=js-language-select><option value=raw>raw</option><option value=php>php</option><option value=ruby>ruby</option><option value=python>python</option><option value=javascript>javascript</option></select><div class=arrow></div></div></div></div></nav></header><div class=content><div class=cnt-two-col><div class=page-wrap><section class="cnt-two-col__nav js-two-col-nav"><div class=close><button class="js-two-col-nav-close icon-cnt-two-col-close"></button></div><div class=language-picker><h6>Language</h6><div class="custom-select custom-select--blue"><select class=js-language-select name=select><option value=raw>raw</option><option value=php selected>php</option><option value=ruby>ruby</option><option value=python>python</option><option value=javascript>javascript</option></select><div class=arrow></div></div></div><!-- nav elements below should be in the same order of the secondary navigation --><nav class="side-nav js-side-nav"><section><h6>Tools</h6><ul><li><a href=/home/tools/HAT_core.html>HAT</a><ul></ul></li><li><a href=/home/tools/rumpel.html>Rumpel</a><ul></ul></li><li><a href=/home/tools/rumpellite.html>RumpelLite</a><ul></ul></li><li><a href=/home/tools/milliner.html>Milliner</a><ul></ul></li><li><a href=/home/tools/data_plugs.html>Data Plugs</a><ul></ul></li><li><a href=/home/tools/dex.html>DEX</a><ul></ul></li><li><a href=/home/tools/marketsquare.html>MarketSquare</a><ul></ul></li><li><a href=/home/tools/databuyer.html>Data Buyer</a><ul></ul></li><li><a href=/home/tools/off_the_shelf_hats.html>Off-the-shelf HATs</a><ul></ul></li></ul><h6>HAT Certification</h6><ul><li><a href=/home/hat_applications.html>HAT Applications</a><ul><li><a href=/home/hat_applications/rating_scheme.html>Rating Scheme</a></li><li><a href=/home/hat_applications/rating_scheme_best_practice.html>Rating Scheme Best Practice</a></li></ul></li><li><a href=/home/hat_service_provider.html>HAT Service Provider</a><ul><li><a href=/home/hat_service_provider/security_requirement_best_practice.html>Security Requirement Best Practice</a></li><li><a href=/home/hat_service_provider/security_requirement.html>Security Requirement</a></li></ul></li></ul><h6>Knowing the HAT Tech Ecosystem</h6><ul><li><a href=/home/knowing.html>Knowing the Ecosystem</a><ul><li><a href=/home/knowing/2_hat_users.html>HAT Users</a></li><li><a href=/home/knowing/3_hat_application.html>HAT Applications</a></li><li><a href=/home/knowing/4_hat_community_foundation.html>HAT Community Foundation</a></li><li><a href=/home/knowing/5_hatdex.html>HATDeX</a></li></ul></li><li><a href=/home/knowing/hat_platform_process_architecture.html>The Architecture Diagram</a><ul></ul></li></ul><h6>Why the HAT?</h6><ul><li><a href=/home/why/what_is_hat.html>Why the HAT?</a><ul></ul></li><li><a href=/home/why/what_can_you_make.html>What can you make on the HAT?</a><ul></ul></li><li><a href=/home/why/why_build_something_on_the_hat.html>Why build something on the HAT?</a><ul></ul></li><li><a href=/home/why/some_cool_apps.html>Some cool apps</a><ul></ul></li></ul></section><section class=side-nav__options><h6>Other Resources</h6><ul><li class=external-link><a href=https://hatters.hubofallthings.com target=_blank><span class=icon-sidenav-option>Get a HAT</span></a></li><li class=external-link><a href=http://forum.hatcommunity.org/c/developers target=_blank><span class=icon-sidenav-option>Developer Forum</span></a></li></ul></section></nav><nav class="side-nav js-side-nav"><section><h6>API v2</h6><ul><li><a href=/documentation/authentication-v2.html>Authentication</a><ul></ul></li><li><a href=/documentation/bundles-v2.html>Bundles</a><ul><li><a href=/documentation/bundles-v2/retrieve_registered_bundle_data.html>Retrieve Registered Bundle Data</a></li><li><a href=/documentation/bundles-v2/propose_data_bundles.html>Propose Data Bundles</a></li></ul></li><li><a href=/documentation/combinators-v2.html>Combinators</a><ul><li><a href=/documentation/combinators-v2/get_data.html>Propose Data Bundles</a></li><li><a href=/documentation/combinators-v2/propose_endpoint.html>Propose A New data Endpoint</a></li></ul></li><li><a href=/documentation/data-v2.html>Data</a><ul><li><a href=/documentation/data-v2/bulk_upload.html>Bulk-upload a large chunk of data to the same endpoint</a></li><li><a href=/documentation/data-v2/delete_a_record.html>Delete A Record</a></li><li><a href=/documentation/data-v2/filter_data_records.html>Filter data records up to a maximum number</a></li><li><a href=/documentation/data-v2/get_data_records.html>Data Records</a></li></ul></li><li><a href=/documentation/data_debits-v2.html>Data Debits</a><ul><li><a href=/documentation/data_debits-v2/update_a_data_debit.html>Update a data debit</a></li><li><a href=/documentation/data_debits-v2/disable_a_data_debit_copy.html>Disable a Data Debit</a></li><li><a href=/documentation/data_debits-v2/enable_a_data_debit.html>Enable a Data Debit</a></li><li><a href=/documentation/data_debits-v2/get_data_debit_values.html>Get Data Debit values</a></li><li><a href=/documentation/data_debits-v2/propose_a_data_debit.html>Propose a Data Debit</a></li></ul></li><li><a href=/documentation/file_storage-v2.html>HAT File Storage</a><ul></ul></li><li><a href=/documentation/linked_data-v2.html>Linked Data</a><ul><li><a href=/documentation/linked_data-v2/retireve_linked_data.html>Retrieve linked data points as per registered endpoint</a></li><li><a href=/documentation/linked_data-v2/batch_data_upload.html>Batch data upload</a></li><li><a href=/documentation/linked_data-v2/save_an_example_record.html>Save an example notable record</a></li><li><a href=/documentation/linked_data-v2/link_up_data_records.html>Link up data records</a></li><li><a href=/documentation/linked_data-v2/save_an_example_nudge.html>Save an example nudge</a></li><li><a href=/documentation/linked_data-v2/new_endpoint.html>New endpoint for linked data retrieval</a></li></ul></li></ul><h6>API v1 - Deprecated</h6><ul><li><a href=/documentation/raw_data_input_and_output.html>Raw Data Input and Output</a><ul><li><a href=/documentation/raw_data_input_and_output/data_field.html>Data Field</a></li><li><a href=/documentation/raw_data_input_and_output/data_sources.html>Data Sources</a></li><li><a href=/documentation/raw_data_input_and_output/data_tables.html>Data Tables</a></li><li><a href=/documentation/raw_data_input_and_output/data_value.html>Data Value</a></li><li><a href=/documentation/raw_data_input_and_output/retrieving_raw_data.html>Retrieving Raw Data</a></li></ul></li><li><a href=/documentation/sharing_and_direct_data_debits.html>Sharing and Direct Data Debits</a><ul></ul></li><li><a href=/documentation/user_management.html>User Management</a><ul><li><a href=/documentation/user_management/direct_data_credit_and_debit_accounts.html>Direct Data Credit and Debit Accounts</a></li><li><a href=/documentation/user_management/authentication.html>Authentication</a></li></ul></li></ul></section></nav><nav class="side-nav js-side-nav active"><section id=js-sidenav-dropdown class=side-nav__dropdown><h6>Choose a guide</h6><div class=picker id=js-sidenav-dropdown-button><button>Raw Data I/O</button><div class="icon icon-side-nav-collapse-plus"></div><div class="icon icon-side-nav-collapse-minus"></div></div><nav id=js-sidenav-dropdown-nav><a href=/guides/hat_login>HAT Login</a> <a href=/guides/provisioning>Provisioning</a> <a href=/guides/dex>Data Exchange Services</a> <a href=/guides/file-storage>File Storage</a></nav></section><section class=steps-nav><h6>In this guide</h6><ol><li><a href=/guides/raw_data_io>Overview: Raw Data I/O</a><div class=dot></div></li><li><a href=/guides/raw_data_io/01-data-input.html class=active>Data Input</a><div class=dot></div></li><li><a href=/guides/raw_data_io/02-data-retrieval.html>Data Retrieval</a><div class=dot></div></li><li><a href=/guides/raw_data_io/03-data-modification.html>Data Modification</a><div class=dot></div></li><li><a href=/guides/raw_data_io/04-next-steps.html>Consented Data Exchange</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>In this guide</h6><ol><li><a href=/guides/hat_login>Overview: HAT Login</a><div class=dot></div></li><li><a href=/guides/hat_login/01-send-hat-login.html>Step 1 - Send user for HAT Login</a><div class=dot></div></li><li><a href=/guides/hat_login/02-login-ui.html>Step 2 - User Logs in</a><div class=dot></div></li><li><a href=/guides/hat_login/03-verify-authenticate.html>Step 3 - Verify and authenticate user</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>In this guide</h6><ol><li><a href=/guides/provisioning>Overview: Provisioning</a><div class=dot></div></li><li><a href=/guides/provisioning/01-sign-up.html>Step 1 - Sign user up with Milliner</a><div class=dot></div></li><li><a href=/guides/provisioning/02-create-hat.html>Step 2 - Create the HAT</a><div class=dot></div></li><li><a href=/guides/provisioning/03-register-hat.html>Step 3 - Register HAT with DEX</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>In this guide</h6><ol><li><a href=/guides/dex>Overview: Data Exchange Services</a><div class=dot></div></li><li><a href=/guides/dex/01-statistics.html>DEX Statistics</a><div class=dot></div></li></ol></section><section class=steps-nav style=display:none><h6>In this guide</h6><ol><li><a href=/guides/file-storage>Overview: File Storage</a><div class=dot></div></li><li><a href=/guides/file-storage/01-upload.html>Step 1 - File Upload</a><div class=dot></div></li><li><a href=/guides/file-storage/02-access-management.html>Step 2 - Access Management</a><div class=dot></div></li><li><a href=/guides/file-storage/03-contents.html>Step 3 - Content Access</a><div class=dot></div></li><li><a href=/guides/file-storage/04-search.html>Step 4 - File lookup/search</a><div class=dot></div></li></ol></section><section class=side-nav__options><h6>API Resources</h6><ul><li class=external-link><a href=https://documenter.getpostman.com/view/110376/hat-rich-data-api-showcase/6YySZS7 target=_blank><span class=icon-sidenav-option>API v2 reference docs</span></a></li><li class=external-link><a href="http://hub-of-all-things.github.io/doc/" target=_blank><span class=icon-sidenav-option>API v1 reference docs</span></a></li></ul></section></nav></section><section class=cnt-two-col__content><p>Data Input can happen in one of two ways:</p><ol><li>Saving one or more homogeneous data records into a single endpoint</li><li>Saving multipe data records that can be potentially heterogeneous, related, or both</li></ol><h3 id=saving-homogeneous-data-records>Saving homogeneous data records</h3><p>A data entry request for a single endpoint (<code>/hat/locations</code>), with multiple records inserted in one go. The data provided in the example is merely an illustration - the HAT will accept <em>any well-formed JSON data</em>. Note the request is authenticated with an <code>ACCESS_TOKEN</code> obtained previously and the token has been issued for the namespace of <code>hat</code> specifically.</p><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>curl --request POST \
  --url https://test.hubat.net/api/v2/data/hat/locations \
  --header 'content-type: application/json' \
  --header 'x-auth-token: ACCESS_TOKEN' \
  --data '[{&quot;id&quot;:85998,&quot;name&quot;:&quot;record 1&quot;,&quot;lastUpdated&quot;:&quot;2017-04-23T16:11:17.000Z&quot;,&quot;data&quot;:{&quot;locations&quot;:{&quot;latitude&quot;:&quot;51.671358277138&quot;,&quot;longitude&quot;:&quot;0.101014673709963&quot;,&quot;accuracy&quot;:&quot;10.0&quot;,&quot;timestamp&quot;:&quot;2017-04-23T16:11:17+0000&quot;}}},{&quot;id&quot;:85997,&quot;name&quot;:&quot;record 3&quot;,&quot;lastUpdated&quot;:&quot;2017-04-23T16:18:04.000Z&quot;,&quot;data&quot;:{&quot;locations&quot;:{&quot;latitude&quot;:&quot;51.6658257133844&quot;,&quot;longitude&quot;:&quot;0.080477950927866&quot;,&quot;accuracy&quot;:&quot;1414.0&quot;,&quot;timestamp&quot;:&quot;2017-04-23T16:18:04+0000&quot;}}},{&quot;id&quot;:85996,&quot;name&quot;:&quot;record 2&quot;,&quot;lastUpdated&quot;:&quot;2017-04-23T16:12:58.000Z&quot;,&quot;data&quot;:{&quot;locations&quot;:{&quot;latitude&quot;:&quot;51.674001392439&quot;,&quot;longitude&quot;:&quot;0.100905202634514&quot;,&quot;accuracy&quot;:&quot;1414.0&quot;,&quot;timestamp&quot;:&quot;2017-04-23T16:12:58+0000&quot;}}}]'
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript>var data = JSON.stringify([
  {
    &quot;id&quot;: 85998,
    &quot;name&quot;: &quot;record 1&quot;,
    &quot;lastUpdated&quot;: &quot;2017-04-23T16:11:17.000Z&quot;,
    &quot;data&quot;: {
      &quot;locations&quot;: {
        &quot;latitude&quot;: &quot;51.671358277138&quot;,
        &quot;longitude&quot;: &quot;0.101014673709963&quot;,
        &quot;accuracy&quot;: &quot;10.0&quot;,
        &quot;timestamp&quot;: &quot;2017-04-23T16:11:17+0000&quot;
      }
    }
  },
  {
    &quot;id&quot;: 85997,
    &quot;name&quot;: &quot;record 3&quot;,
    &quot;lastUpdated&quot;: &quot;2017-04-23T16:18:04.000Z&quot;,
    &quot;data&quot;: {
      &quot;locations&quot;: {
        &quot;latitude&quot;: &quot;51.6658257133844&quot;,
        &quot;longitude&quot;: &quot;0.080477950927866&quot;,
        &quot;accuracy&quot;: &quot;1414.0&quot;,
        &quot;timestamp&quot;: &quot;2017-04-23T16:18:04+0000&quot;
      }
    }
  },
  {
    &quot;id&quot;: 85996,
    &quot;name&quot;: &quot;record 2&quot;,
    &quot;lastUpdated&quot;: &quot;2017-04-23T16:12:58.000Z&quot;,
    &quot;data&quot;: {
      &quot;locations&quot;: {
        &quot;latitude&quot;: &quot;51.674001392439&quot;,
        &quot;longitude&quot;: &quot;0.100905202634514&quot;,
        &quot;accuracy&quot;: &quot;1414.0&quot;,
        &quot;timestamp&quot;: &quot;2017-04-23T16:12:58+0000&quot;
      }
    }
  }
]);

var xhr = new XMLHttpRequest();
xhr.withCredentials = true;

xhr.addEventListener(&quot;readystatechange&quot;, function () {
  if (this.readyState === this.DONE) {
    console.log(this.responseText);
  }
});

xhr.open(&quot;POST&quot;, &quot;https://test.hubat.net/api/v2/data/hat/locations&quot;);
xhr.setRequestHeader(&quot;content-type&quot;, &quot;application/json&quot;);
xhr.setRequestHeader(&quot;x-auth-token&quot;, &quot;ACCESS_TOKEN&quot;);

xhr.send(data);
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php>&lt;?php

$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL =&gt; &quot;https://test.hubat.net/api/v2/data/hat/locations&quot;,
  CURLOPT_RETURNTRANSFER =&gt; true,
  CURLOPT_ENCODING =&gt; &quot;&quot;,
  CURLOPT_MAXREDIRS =&gt; 10,
  CURLOPT_TIMEOUT =&gt; 30,
  CURLOPT_HTTP_VERSION =&gt; CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST =&gt; &quot;POST&quot;,
  CURLOPT_POSTFIELDS =&gt; &quot;[{\&quot;id\&quot;:85998,\&quot;name\&quot;:\&quot;record 1\&quot;,\&quot;lastUpdated\&quot;:\&quot;2017-04-23T16:11:17.000Z\&quot;,\&quot;data\&quot;:{\&quot;locations\&quot;:{\&quot;latitude\&quot;:\&quot;51.671358277138\&quot;,\&quot;longitude\&quot;:\&quot;0.101014673709963\&quot;,\&quot;accuracy\&quot;:\&quot;10.0\&quot;,\&quot;timestamp\&quot;:\&quot;2017-04-23T16:11:17+0000\&quot;}}},{\&quot;id\&quot;:85997,\&quot;name\&quot;:\&quot;record 3\&quot;,\&quot;lastUpdated\&quot;:\&quot;2017-04-23T16:18:04.000Z\&quot;,\&quot;data\&quot;:{\&quot;locations\&quot;:{\&quot;latitude\&quot;:\&quot;51.6658257133844\&quot;,\&quot;longitude\&quot;:\&quot;0.080477950927866\&quot;,\&quot;accuracy\&quot;:\&quot;1414.0\&quot;,\&quot;timestamp\&quot;:\&quot;2017-04-23T16:18:04+0000\&quot;}}},{\&quot;id\&quot;:85996,\&quot;name\&quot;:\&quot;record 2\&quot;,\&quot;lastUpdated\&quot;:\&quot;2017-04-23T16:12:58.000Z\&quot;,\&quot;data\&quot;:{\&quot;locations\&quot;:{\&quot;latitude\&quot;:\&quot;51.674001392439\&quot;,\&quot;longitude\&quot;:\&quot;0.100905202634514\&quot;,\&quot;accuracy\&quot;:\&quot;1414.0\&quot;,\&quot;timestamp\&quot;:\&quot;2017-04-23T16:12:58+0000\&quot;}}}]&quot;,
  CURLOPT_HTTPHEADER =&gt; array(
    &quot;content-type: application/json&quot;,
    &quot;x-auth-token: ACCESS_TOKEN&quot;
  ),
));

$response = curl_exec($curl);
$err = curl_error($curl);

curl_close($curl);

if ($err) {
  echo &quot;cURL Error #:&quot; . $err;
} else {
  echo $response;
}
</code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python>import requests

url = &quot;https://test.hubat.net/api/v2/data/hat/locations&quot;

payload = &quot;[{\&quot;id\&quot;:85998,\&quot;name\&quot;:\&quot;record 1\&quot;,\&quot;lastUpdated\&quot;:\&quot;2017-04-23T16:11:17.000Z\&quot;,\&quot;data\&quot;:{\&quot;locations\&quot;:{\&quot;latitude\&quot;:\&quot;51.671358277138\&quot;,\&quot;longitude\&quot;:\&quot;0.101014673709963\&quot;,\&quot;accuracy\&quot;:\&quot;10.0\&quot;,\&quot;timestamp\&quot;:\&quot;2017-04-23T16:11:17+0000\&quot;}}},{\&quot;id\&quot;:85997,\&quot;name\&quot;:\&quot;record 3\&quot;,\&quot;lastUpdated\&quot;:\&quot;2017-04-23T16:18:04.000Z\&quot;,\&quot;data\&quot;:{\&quot;locations\&quot;:{\&quot;latitude\&quot;:\&quot;51.6658257133844\&quot;,\&quot;longitude\&quot;:\&quot;0.080477950927866\&quot;,\&quot;accuracy\&quot;:\&quot;1414.0\&quot;,\&quot;timestamp\&quot;:\&quot;2017-04-23T16:18:04+0000\&quot;}}},{\&quot;id\&quot;:85996,\&quot;name\&quot;:\&quot;record 2\&quot;,\&quot;lastUpdated\&quot;:\&quot;2017-04-23T16:12:58.000Z\&quot;,\&quot;data\&quot;:{\&quot;locations\&quot;:{\&quot;latitude\&quot;:\&quot;51.674001392439\&quot;,\&quot;longitude\&quot;:\&quot;0.100905202634514\&quot;,\&quot;accuracy\&quot;:\&quot;1414.0\&quot;,\&quot;timestamp\&quot;:\&quot;2017-04-23T16:12:58+0000\&quot;}}}]&quot;
headers = {
    'content-type': &quot;application/json&quot;,
    'x-auth-token': &quot;ACCESS_TOKEN&quot;
    }

response = requests.request(&quot;POST&quot;, url, data=payload, headers=headers)

print(response.text)
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby>require 'uri'
require 'net/http'

url = URI(&quot;https://test.hubat.net/api/v2/data/hat/locations&quot;)

http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

request = Net::HTTP::Post.new(url)
request[&quot;content-type&quot;] = 'application/json'
request[&quot;x-auth-token&quot;] = 'ACCESS_TOKEN'
request.body = &quot;[{\&quot;id\&quot;:85998,\&quot;name\&quot;:\&quot;record 1\&quot;,\&quot;lastUpdated\&quot;:\&quot;2017-04-23T16:11:17.000Z\&quot;,\&quot;data\&quot;:{\&quot;locations\&quot;:{\&quot;latitude\&quot;:\&quot;51.671358277138\&quot;,\&quot;longitude\&quot;:\&quot;0.101014673709963\&quot;,\&quot;accuracy\&quot;:\&quot;10.0\&quot;,\&quot;timestamp\&quot;:\&quot;2017-04-23T16:11:17+0000\&quot;}}},{\&quot;id\&quot;:85997,\&quot;name\&quot;:\&quot;record 3\&quot;,\&quot;lastUpdated\&quot;:\&quot;2017-04-23T16:18:04.000Z\&quot;,\&quot;data\&quot;:{\&quot;locations\&quot;:{\&quot;latitude\&quot;:\&quot;51.6658257133844\&quot;,\&quot;longitude\&quot;:\&quot;0.080477950927866\&quot;,\&quot;accuracy\&quot;:\&quot;1414.0\&quot;,\&quot;timestamp\&quot;:\&quot;2017-04-23T16:18:04+0000\&quot;}}},{\&quot;id\&quot;:85996,\&quot;name\&quot;:\&quot;record 2\&quot;,\&quot;lastUpdated\&quot;:\&quot;2017-04-23T16:12:58.000Z\&quot;,\&quot;data\&quot;:{\&quot;locations\&quot;:{\&quot;latitude\&quot;:\&quot;51.674001392439\&quot;,\&quot;longitude\&quot;:\&quot;0.100905202634514\&quot;,\&quot;accuracy\&quot;:\&quot;1414.0\&quot;,\&quot;timestamp\&quot;:\&quot;2017-04-23T16:12:58+0000\&quot;}}}]&quot;

response = http.request(request)
puts response.read_body
</code></pre></div></div><p>If the data gets saved, the response includes the full data, wrapped in the Record data structure: - <code>endpoint</code> field that includes the specific endpoint the record was assigned to - <code>recordId</code> - UUID of the data record - <code>data</code> - the data JSON structure exactly as submitted</p><div class="code-snippet js-code-snippet language-http"><p></p><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch_ id=http>Data saved</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-http data-lang=http>
HTTP/1.1 201 Created
Content-Type: application/json


[
  {
    "endpoint": "locations",
    "recordId": "f8c011d1-98f0-4e5f-89a6-64b949724eba",
    "data": {
      "id": 185998,
      "data": {
        "locations": {
          "accuracy": "10.0",
          "latitude": "51.671358277138",
          "longitude": "0.101014673709963",
          "timestamp": "2017-04-23T16:11:17+0000"
        }
      },
      "name": "record 1",
      "lastUpdated": "2017-04-23T16:11:17.000Z"
    },
    "links": [

    ]
  },
  {
    "endpoint": "locations",
    "recordId": "0a79bef4-9a8e-4d19-937d-9a759fc2981b",
    "data": {
      "id": 185997,
      "data": {
        "locations": {
          "accuracy": "1414.0",
          "latitude": "51.6658257133844",
          "longitude": "0.080477950927866",
          "timestamp": "2017-04-23T16:18:04+0000"
        }
      },
      "name": "record 3",
      "lastUpdated": "2017-04-23T16:18:04.000Z"
    },
    "links": [

    ]
  },
  {
    "endpoint": "locations",
    "recordId": "b6ebcdc3-235e-4e8c-834c-eec08beb55cd",
    "data": {
      "id": 185996,
      "data": {
        "locations": {
          "accuracy": "1414.0",
          "latitude": "51.674001392439",
          "longitude": "0.100905202634514",
          "timestamp": "2017-04-23T16:12:58+0000"
        }
      },
      "name": "record 2",
      "lastUpdated": "2017-04-23T16:12:58.000Z"
    },
    "links": [

    ]
  }
]
</code></pre></div></div><p>If there are any problems with your JSON (e.g. it is malformed), you will receive a <code>Bad Request</code> response code with the details of the error in the body of the response. If, for example, such data (as decided by its hash) already exists in the HAT, none of the data in the request will be saved and you will receive a message indicating so:</p><div class="code-snippet js-code-snippet language-http"><p></p><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch_ id=http>Error: duplicate data received</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-http data-lang=http>
HTTP/1.1 400 Bad Request
Content-Type: application/json


{
  "message": "Duplicate Data",
  "cause": "Could not insert data - Duplicate data"
}
</code></pre></div></div><p><em>Note: all data entry operations are <em>transactional</em>, i.e. insertion of all data provided in the request succeeds or the whole request fails and no data gets inserted.</em></p><p>To illustrate HAT&rsquo;s acceptance of <em>any valid JSON data</em>, here is another example, saving very different profile data in the same <code>namespace</code>, but a different <code>endpoint</code>:</p><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>curl --request POST \
  --url https://test.hubat.net/api/v2/data/rumpel/profile \
  --header 'content-type: application/json' \
  --header 'x-auth-token: ACCESS_TOKEN' \
  --data '{&quot;profile&quot;:{&quot;website&quot;:{&quot;link&quot;:&quot;https://example.com&quot;,&quot;private&quot;:&quot;false&quot;},&quot;nick&quot;:{&quot;private&quot;:&quot;true&quot;,&quot;name&quot;:&quot;&quot;},&quot;primary_email&quot;:{&quot;value&quot;:&quot;testuser@example.com&quot;,&quot;private&quot;:&quot;false&quot;},&quot;private&quot;:&quot;false&quot;,&quot;youtube&quot;:{&quot;link&quot;:&quot;&quot;,&quot;private&quot;:&quot;true&quot;},&quot;address_global&quot;:{&quot;city&quot;:&quot;London&quot;,&quot;county&quot;:&quot;&quot;,&quot;country&quot;:&quot;UK&quot;,&quot;private&quot;:&quot;true&quot;},&quot;age&quot;:{&quot;group&quot;:&quot;&quot;,&quot;private&quot;:&quot;true&quot;},&quot;personal&quot;:{&quot;first_name&quot;:&quot;&quot;,&quot;private&quot;:&quot;false&quot;,&quot;preferred_name&quot;:&quot;Test&quot;,&quot;last_name&quot;:&quot;User&quot;,&quot;middle_name&quot;:&quot;&quot;,&quot;title&quot;:&quot;&quot;},&quot;blog&quot;:{&quot;link&quot;:&quot;&quot;,&quot;private&quot;:&quot;false&quot;},&quot;facebook&quot;:{&quot;link&quot;:&quot;&quot;,&quot;private&quot;:&quot;false&quot;},&quot;address_details&quot;:{&quot;no&quot;:&quot;&quot;,&quot;street&quot;:&quot;&quot;,&quot;private&quot;:&quot;false&quot;,&quot;postcode&quot;:&quot;&quot;},&quot;emergency_contact&quot;:{&quot;first_name&quot;:&quot;&quot;,&quot;private&quot;:&quot;true&quot;,&quot;relationship&quot;:&quot;&quot;,&quot;last_name&quot;:&quot;&quot;,&quot;mobile&quot;:&quot;&quot;},&quot;alternative_email&quot;:{&quot;private&quot;:&quot;true&quot;,&quot;value&quot;:&quot;&quot;},&quot;fb_profile_photo&quot;:{&quot;private&quot;:&quot;false&quot;},&quot;twitter&quot;:{&quot;link&quot;:&quot;&quot;,&quot;private&quot;:&quot;false&quot;},&quot;about&quot;:{&quot;body&quot;:&quot;A short bio about me shown on my PHATA&quot;,&quot;private&quot;:&quot;false&quot;,&quot;title&quot;:&quot;Me the Test User&quot;},&quot;mobile&quot;:{&quot;no&quot;:&quot;&quot;,&quot;private&quot;:&quot;true&quot;},&quot;gender&quot;:{&quot;type&quot;:&quot;&quot;,&quot;private&quot;:&quot;true&quot;}}}'
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript>var data = JSON.stringify({
  &quot;profile&quot;: {
    &quot;website&quot;: {
      &quot;link&quot;: &quot;https://example.com&quot;,
      &quot;private&quot;: &quot;false&quot;
    },
    &quot;nick&quot;: {
      &quot;private&quot;: &quot;true&quot;,
      &quot;name&quot;: &quot;&quot;
    },
    &quot;primary_email&quot;: {
      &quot;value&quot;: &quot;testuser@example.com&quot;,
      &quot;private&quot;: &quot;false&quot;
    },
    &quot;private&quot;: &quot;false&quot;,
    &quot;youtube&quot;: {
      &quot;link&quot;: &quot;&quot;,
      &quot;private&quot;: &quot;true&quot;
    },
    &quot;address_global&quot;: {
      &quot;city&quot;: &quot;London&quot;,
      &quot;county&quot;: &quot;&quot;,
      &quot;country&quot;: &quot;UK&quot;,
      &quot;private&quot;: &quot;true&quot;
    },
    &quot;age&quot;: {
      &quot;group&quot;: &quot;&quot;,
      &quot;private&quot;: &quot;true&quot;
    },
    &quot;personal&quot;: {
      &quot;first_name&quot;: &quot;&quot;,
      &quot;private&quot;: &quot;false&quot;,
      &quot;preferred_name&quot;: &quot;Test&quot;,
      &quot;last_name&quot;: &quot;User&quot;,
      &quot;middle_name&quot;: &quot;&quot;,
      &quot;title&quot;: &quot;&quot;
    },
    &quot;blog&quot;: {
      &quot;link&quot;: &quot;&quot;,
      &quot;private&quot;: &quot;false&quot;
    },
    &quot;facebook&quot;: {
      &quot;link&quot;: &quot;&quot;,
      &quot;private&quot;: &quot;false&quot;
    },
    &quot;address_details&quot;: {
      &quot;no&quot;: &quot;&quot;,
      &quot;street&quot;: &quot;&quot;,
      &quot;private&quot;: &quot;false&quot;,
      &quot;postcode&quot;: &quot;&quot;
    },
    &quot;emergency_contact&quot;: {
      &quot;first_name&quot;: &quot;&quot;,
      &quot;private&quot;: &quot;true&quot;,
      &quot;relationship&quot;: &quot;&quot;,
      &quot;last_name&quot;: &quot;&quot;,
      &quot;mobile&quot;: &quot;&quot;
    },
    &quot;alternative_email&quot;: {
      &quot;private&quot;: &quot;true&quot;,
      &quot;value&quot;: &quot;&quot;
    },
    &quot;fb_profile_photo&quot;: {
      &quot;private&quot;: &quot;false&quot;
    },
    &quot;twitter&quot;: {
      &quot;link&quot;: &quot;&quot;,
      &quot;private&quot;: &quot;false&quot;
    },
    &quot;about&quot;: {
      &quot;body&quot;: &quot;A short bio about me shown on my PHATA&quot;,
      &quot;private&quot;: &quot;false&quot;,
      &quot;title&quot;: &quot;Me the Test User&quot;
    },
    &quot;mobile&quot;: {
      &quot;no&quot;: &quot;&quot;,
      &quot;private&quot;: &quot;true&quot;
    },
    &quot;gender&quot;: {
      &quot;type&quot;: &quot;&quot;,
      &quot;private&quot;: &quot;true&quot;
    }
  }
});

var xhr = new XMLHttpRequest();
xhr.withCredentials = true;

xhr.addEventListener(&quot;readystatechange&quot;, function () {
  if (this.readyState === this.DONE) {
    console.log(this.responseText);
  }
});

xhr.open(&quot;POST&quot;, &quot;https://test.hubat.net/api/v2/data/rumpel/profile&quot;);
xhr.setRequestHeader(&quot;content-type&quot;, &quot;application/json&quot;);
xhr.setRequestHeader(&quot;x-auth-token&quot;, &quot;ACCESS_TOKEN&quot;);

xhr.send(data);
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php>&lt;?php

$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL =&gt; &quot;https://test.hubat.net/api/v2/data/rumpel/profile&quot;,
  CURLOPT_RETURNTRANSFER =&gt; true,
  CURLOPT_ENCODING =&gt; &quot;&quot;,
  CURLOPT_MAXREDIRS =&gt; 10,
  CURLOPT_TIMEOUT =&gt; 30,
  CURLOPT_HTTP_VERSION =&gt; CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST =&gt; &quot;POST&quot;,
  CURLOPT_POSTFIELDS =&gt; &quot;{\&quot;profile\&quot;:{\&quot;website\&quot;:{\&quot;link\&quot;:\&quot;https://example.com\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;nick\&quot;:{\&quot;private\&quot;:\&quot;true\&quot;,\&quot;name\&quot;:\&quot;\&quot;},\&quot;primary_email\&quot;:{\&quot;value\&quot;:\&quot;testuser@example.com\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;private\&quot;:\&quot;false\&quot;,\&quot;youtube\&quot;:{\&quot;link\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;},\&quot;address_global\&quot;:{\&quot;city\&quot;:\&quot;London\&quot;,\&quot;county\&quot;:\&quot;\&quot;,\&quot;country\&quot;:\&quot;UK\&quot;,\&quot;private\&quot;:\&quot;true\&quot;},\&quot;age\&quot;:{\&quot;group\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;},\&quot;personal\&quot;:{\&quot;first_name\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;,\&quot;preferred_name\&quot;:\&quot;Test\&quot;,\&quot;last_name\&quot;:\&quot;User\&quot;,\&quot;middle_name\&quot;:\&quot;\&quot;,\&quot;title\&quot;:\&quot;\&quot;},\&quot;blog\&quot;:{\&quot;link\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;facebook\&quot;:{\&quot;link\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;address_details\&quot;:{\&quot;no\&quot;:\&quot;\&quot;,\&quot;street\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;,\&quot;postcode\&quot;:\&quot;\&quot;},\&quot;emergency_contact\&quot;:{\&quot;first_name\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;,\&quot;relationship\&quot;:\&quot;\&quot;,\&quot;last_name\&quot;:\&quot;\&quot;,\&quot;mobile\&quot;:\&quot;\&quot;},\&quot;alternative_email\&quot;:{\&quot;private\&quot;:\&quot;true\&quot;,\&quot;value\&quot;:\&quot;\&quot;},\&quot;fb_profile_photo\&quot;:{\&quot;private\&quot;:\&quot;false\&quot;},\&quot;twitter\&quot;:{\&quot;link\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;about\&quot;:{\&quot;body\&quot;:\&quot;A short bio about me shown on my PHATA\&quot;,\&quot;private\&quot;:\&quot;false\&quot;,\&quot;title\&quot;:\&quot;Me the Test User\&quot;},\&quot;mobile\&quot;:{\&quot;no\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;},\&quot;gender\&quot;:{\&quot;type\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;}}}&quot;,
  CURLOPT_HTTPHEADER =&gt; array(
    &quot;content-type: application/json&quot;,
    &quot;x-auth-token: ACCESS_TOKEN&quot;
  ),
));

$response = curl_exec($curl);
$err = curl_error($curl);

curl_close($curl);

if ($err) {
  echo &quot;cURL Error #:&quot; . $err;
} else {
  echo $response;
}
</code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python>import requests

url = &quot;https://test.hubat.net/api/v2/data/rumpel/profile&quot;

payload = &quot;{\&quot;profile\&quot;:{\&quot;website\&quot;:{\&quot;link\&quot;:\&quot;https://example.com\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;nick\&quot;:{\&quot;private\&quot;:\&quot;true\&quot;,\&quot;name\&quot;:\&quot;\&quot;},\&quot;primary_email\&quot;:{\&quot;value\&quot;:\&quot;testuser@example.com\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;private\&quot;:\&quot;false\&quot;,\&quot;youtube\&quot;:{\&quot;link\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;},\&quot;address_global\&quot;:{\&quot;city\&quot;:\&quot;London\&quot;,\&quot;county\&quot;:\&quot;\&quot;,\&quot;country\&quot;:\&quot;UK\&quot;,\&quot;private\&quot;:\&quot;true\&quot;},\&quot;age\&quot;:{\&quot;group\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;},\&quot;personal\&quot;:{\&quot;first_name\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;,\&quot;preferred_name\&quot;:\&quot;Test\&quot;,\&quot;last_name\&quot;:\&quot;User\&quot;,\&quot;middle_name\&quot;:\&quot;\&quot;,\&quot;title\&quot;:\&quot;\&quot;},\&quot;blog\&quot;:{\&quot;link\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;facebook\&quot;:{\&quot;link\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;address_details\&quot;:{\&quot;no\&quot;:\&quot;\&quot;,\&quot;street\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;,\&quot;postcode\&quot;:\&quot;\&quot;},\&quot;emergency_contact\&quot;:{\&quot;first_name\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;,\&quot;relationship\&quot;:\&quot;\&quot;,\&quot;last_name\&quot;:\&quot;\&quot;,\&quot;mobile\&quot;:\&quot;\&quot;},\&quot;alternative_email\&quot;:{\&quot;private\&quot;:\&quot;true\&quot;,\&quot;value\&quot;:\&quot;\&quot;},\&quot;fb_profile_photo\&quot;:{\&quot;private\&quot;:\&quot;false\&quot;},\&quot;twitter\&quot;:{\&quot;link\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;about\&quot;:{\&quot;body\&quot;:\&quot;A short bio about me shown on my PHATA\&quot;,\&quot;private\&quot;:\&quot;false\&quot;,\&quot;title\&quot;:\&quot;Me the Test User\&quot;},\&quot;mobile\&quot;:{\&quot;no\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;},\&quot;gender\&quot;:{\&quot;type\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;}}}&quot;
headers = {
    'content-type': &quot;application/json&quot;,
    'x-auth-token': &quot;ACCESS_TOKEN&quot;
    }

response = requests.request(&quot;POST&quot;, url, data=payload, headers=headers)

print(response.text)
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby>require 'uri'
require 'net/http'

url = URI(&quot;https://test.hubat.net/api/v2/data/rumpel/profile&quot;)

http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

request = Net::HTTP::Post.new(url)
request[&quot;content-type&quot;] = 'application/json'
request[&quot;x-auth-token&quot;] = 'ACCESS_TOKEN'
request.body = &quot;{\&quot;profile\&quot;:{\&quot;website\&quot;:{\&quot;link\&quot;:\&quot;https://example.com\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;nick\&quot;:{\&quot;private\&quot;:\&quot;true\&quot;,\&quot;name\&quot;:\&quot;\&quot;},\&quot;primary_email\&quot;:{\&quot;value\&quot;:\&quot;testuser@example.com\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;private\&quot;:\&quot;false\&quot;,\&quot;youtube\&quot;:{\&quot;link\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;},\&quot;address_global\&quot;:{\&quot;city\&quot;:\&quot;London\&quot;,\&quot;county\&quot;:\&quot;\&quot;,\&quot;country\&quot;:\&quot;UK\&quot;,\&quot;private\&quot;:\&quot;true\&quot;},\&quot;age\&quot;:{\&quot;group\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;},\&quot;personal\&quot;:{\&quot;first_name\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;,\&quot;preferred_name\&quot;:\&quot;Test\&quot;,\&quot;last_name\&quot;:\&quot;User\&quot;,\&quot;middle_name\&quot;:\&quot;\&quot;,\&quot;title\&quot;:\&quot;\&quot;},\&quot;blog\&quot;:{\&quot;link\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;facebook\&quot;:{\&quot;link\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;address_details\&quot;:{\&quot;no\&quot;:\&quot;\&quot;,\&quot;street\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;,\&quot;postcode\&quot;:\&quot;\&quot;},\&quot;emergency_contact\&quot;:{\&quot;first_name\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;,\&quot;relationship\&quot;:\&quot;\&quot;,\&quot;last_name\&quot;:\&quot;\&quot;,\&quot;mobile\&quot;:\&quot;\&quot;},\&quot;alternative_email\&quot;:{\&quot;private\&quot;:\&quot;true\&quot;,\&quot;value\&quot;:\&quot;\&quot;},\&quot;fb_profile_photo\&quot;:{\&quot;private\&quot;:\&quot;false\&quot;},\&quot;twitter\&quot;:{\&quot;link\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;false\&quot;},\&quot;about\&quot;:{\&quot;body\&quot;:\&quot;A short bio about me shown on my PHATA\&quot;,\&quot;private\&quot;:\&quot;false\&quot;,\&quot;title\&quot;:\&quot;Me the Test User\&quot;},\&quot;mobile\&quot;:{\&quot;no\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;},\&quot;gender\&quot;:{\&quot;type\&quot;:\&quot;\&quot;,\&quot;private\&quot;:\&quot;true\&quot;}}}&quot;

response = http.request(request)
puts response.read_body
</code></pre></div></div><h3 id=saving-related-data-records>Saving related data records</h3><p>Heterogeneous data records can be inserted simultaneously using the batch-data API endpoint. One example where such data insertion is useful is HAT notes, where a text-based note is saved with an attached &ldquo;nudge&rdquo; - a time-based reminder connected to the note. It is important to keep notes and nudges logically separate, because both can be used independently, e.g. a nudge can be attached to certain locations, photos, posts&hellip;</p><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>curl --request POST \
  --url https://test.hubat.net/api/v2/data-batch \
  --header 'content-type: application/json' \
  --header 'x-auth-token: ACCESS_TOKEN' \
  --data '[{&quot;endpoint&quot;:&quot;rumpel/notable&quot;,&quot;data&quot;:{&quot;id&quot;:84995,&quot;lastUpdated&quot;:&quot;2017-04-23T14:21:51+01:00&quot;,&quot;data&quot;:{&quot;notablesv1&quot;:{&quot;authorv1&quot;:{&quot;phata&quot;:&quot;testing.hubat.net&quot;},&quot;created_time&quot;:&quot;2017-04-10T14:19:59:+01:00&quot;,&quot;shared&quot;:&quot;true&quot;,&quot;shared_on&quot;:&quot;twitter&quot;,&quot;message&quot;:&quot;Showcasing the new HAT APIs&quot;,&quot;public_until&quot;:&quot;2017-05-11T14:21:54+01:00&quot;,&quot;updated_time&quot;:&quot;2017-04-23T14:21:58+01:00&quot;,&quot;kind&quot;:&quot;note&quot;}}},&quot;links&quot;:[{&quot;endpoint&quot;:&quot;rumpel/nudge&quot;,&quot;data&quot;:{&quot;type&quot;:&quot;time&quot;,&quot;nudge&quot;:&quot;Share APIs with the world&quot;,&quot;time&quot;:&quot;2017-04-30T14:22:52+01:00&quot;}}]}]'
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript>var data = JSON.stringify([
  {
    &quot;endpoint&quot;: &quot;rumpel/notable&quot;,
    &quot;data&quot;: {
      &quot;id&quot;: 84995,
      &quot;lastUpdated&quot;: &quot;2017-04-23T14:21:51+01:00&quot;,
      &quot;data&quot;: {
        &quot;notablesv1&quot;: {
          &quot;authorv1&quot;: {
            &quot;phata&quot;: &quot;testing.hubat.net&quot;
          },
          &quot;created_time&quot;: &quot;2017-04-10T14:19:59:+01:00&quot;,
          &quot;shared&quot;: &quot;true&quot;,
          &quot;shared_on&quot;: &quot;twitter&quot;,
          &quot;message&quot;: &quot;Showcasing the new HAT APIs&quot;,
          &quot;public_until&quot;: &quot;2017-05-11T14:21:54+01:00&quot;,
          &quot;updated_time&quot;: &quot;2017-04-23T14:21:58+01:00&quot;,
          &quot;kind&quot;: &quot;note&quot;
        }
      }
    },
    &quot;links&quot;: [
      {
        &quot;endpoint&quot;: &quot;rumpel/nudge&quot;,
        &quot;data&quot;: {
          &quot;type&quot;: &quot;time&quot;,
          &quot;nudge&quot;: &quot;Share APIs with the world&quot;,
          &quot;time&quot;: &quot;2017-04-30T14:22:52+01:00&quot;
        }
      }
    ]
  }
]);

var xhr = new XMLHttpRequest();
xhr.withCredentials = true;

xhr.addEventListener(&quot;readystatechange&quot;, function () {
  if (this.readyState === this.DONE) {
    console.log(this.responseText);
  }
});

xhr.open(&quot;POST&quot;, &quot;https://test.hubat.net/api/v2/data-batch&quot;);
xhr.setRequestHeader(&quot;content-type&quot;, &quot;application/json&quot;);
xhr.setRequestHeader(&quot;x-auth-token&quot;, &quot;ACCESS_TOKEN&quot;);

xhr.send(data);
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php>&lt;?php

$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL =&gt; &quot;https://test.hubat.net/api/v2/data-batch&quot;,
  CURLOPT_RETURNTRANSFER =&gt; true,
  CURLOPT_ENCODING =&gt; &quot;&quot;,
  CURLOPT_MAXREDIRS =&gt; 10,
  CURLOPT_TIMEOUT =&gt; 30,
  CURLOPT_HTTP_VERSION =&gt; CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST =&gt; &quot;POST&quot;,
  CURLOPT_POSTFIELDS =&gt; &quot;[{\&quot;endpoint\&quot;:\&quot;rumpel/notable\&quot;,\&quot;data\&quot;:{\&quot;id\&quot;:84995,\&quot;lastUpdated\&quot;:\&quot;2017-04-23T14:21:51+01:00\&quot;,\&quot;data\&quot;:{\&quot;notablesv1\&quot;:{\&quot;authorv1\&quot;:{\&quot;phata\&quot;:\&quot;testing.hubat.net\&quot;},\&quot;created_time\&quot;:\&quot;2017-04-10T14:19:59:+01:00\&quot;,\&quot;shared\&quot;:\&quot;true\&quot;,\&quot;shared_on\&quot;:\&quot;twitter\&quot;,\&quot;message\&quot;:\&quot;Showcasing the new HAT APIs\&quot;,\&quot;public_until\&quot;:\&quot;2017-05-11T14:21:54+01:00\&quot;,\&quot;updated_time\&quot;:\&quot;2017-04-23T14:21:58+01:00\&quot;,\&quot;kind\&quot;:\&quot;note\&quot;}}},\&quot;links\&quot;:[{\&quot;endpoint\&quot;:\&quot;rumpel/nudge\&quot;,\&quot;data\&quot;:{\&quot;type\&quot;:\&quot;time\&quot;,\&quot;nudge\&quot;:\&quot;Share APIs with the world\&quot;,\&quot;time\&quot;:\&quot;2017-04-30T14:22:52+01:00\&quot;}}]}]&quot;,
  CURLOPT_HTTPHEADER =&gt; array(
    &quot;content-type: application/json&quot;,
    &quot;x-auth-token: ACCESS_TOKEN&quot;
  ),
));

$response = curl_exec($curl);
$err = curl_error($curl);

curl_close($curl);

if ($err) {
  echo &quot;cURL Error #:&quot; . $err;
} else {
  echo $response;
}
</code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python>import requests

url = &quot;https://test.hubat.net/api/v2/data-batch&quot;

payload = &quot;[{\&quot;endpoint\&quot;:\&quot;rumpel/notable\&quot;,\&quot;data\&quot;:{\&quot;id\&quot;:84995,\&quot;lastUpdated\&quot;:\&quot;2017-04-23T14:21:51+01:00\&quot;,\&quot;data\&quot;:{\&quot;notablesv1\&quot;:{\&quot;authorv1\&quot;:{\&quot;phata\&quot;:\&quot;testing.hubat.net\&quot;},\&quot;created_time\&quot;:\&quot;2017-04-10T14:19:59:+01:00\&quot;,\&quot;shared\&quot;:\&quot;true\&quot;,\&quot;shared_on\&quot;:\&quot;twitter\&quot;,\&quot;message\&quot;:\&quot;Showcasing the new HAT APIs\&quot;,\&quot;public_until\&quot;:\&quot;2017-05-11T14:21:54+01:00\&quot;,\&quot;updated_time\&quot;:\&quot;2017-04-23T14:21:58+01:00\&quot;,\&quot;kind\&quot;:\&quot;note\&quot;}}},\&quot;links\&quot;:[{\&quot;endpoint\&quot;:\&quot;rumpel/nudge\&quot;,\&quot;data\&quot;:{\&quot;type\&quot;:\&quot;time\&quot;,\&quot;nudge\&quot;:\&quot;Share APIs with the world\&quot;,\&quot;time\&quot;:\&quot;2017-04-30T14:22:52+01:00\&quot;}}]}]&quot;
headers = {
    'content-type': &quot;application/json&quot;,
    'x-auth-token': &quot;ACCESS_TOKEN&quot;
    }

response = requests.request(&quot;POST&quot;, url, data=payload, headers=headers)

print(response.text)
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby>require 'uri'
require 'net/http'

url = URI(&quot;https://test.hubat.net/api/v2/data-batch&quot;)

http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

request = Net::HTTP::Post.new(url)
request[&quot;content-type&quot;] = 'application/json'
request[&quot;x-auth-token&quot;] = 'ACCESS_TOKEN'
request.body = &quot;[{\&quot;endpoint\&quot;:\&quot;rumpel/notable\&quot;,\&quot;data\&quot;:{\&quot;id\&quot;:84995,\&quot;lastUpdated\&quot;:\&quot;2017-04-23T14:21:51+01:00\&quot;,\&quot;data\&quot;:{\&quot;notablesv1\&quot;:{\&quot;authorv1\&quot;:{\&quot;phata\&quot;:\&quot;testing.hubat.net\&quot;},\&quot;created_time\&quot;:\&quot;2017-04-10T14:19:59:+01:00\&quot;,\&quot;shared\&quot;:\&quot;true\&quot;,\&quot;shared_on\&quot;:\&quot;twitter\&quot;,\&quot;message\&quot;:\&quot;Showcasing the new HAT APIs\&quot;,\&quot;public_until\&quot;:\&quot;2017-05-11T14:21:54+01:00\&quot;,\&quot;updated_time\&quot;:\&quot;2017-04-23T14:21:58+01:00\&quot;,\&quot;kind\&quot;:\&quot;note\&quot;}}},\&quot;links\&quot;:[{\&quot;endpoint\&quot;:\&quot;rumpel/nudge\&quot;,\&quot;data\&quot;:{\&quot;type\&quot;:\&quot;time\&quot;,\&quot;nudge\&quot;:\&quot;Share APIs with the world\&quot;,\&quot;time\&quot;:\&quot;2017-04-30T14:22:52+01:00\&quot;}}]}]&quot;

response = http.request(request)
puts response.read_body
</code></pre></div></div><p>The response will include the main data record with the note as well as a separate data record with the nudge, linked to the main one.</p><p>Data records do not necessarily need to be linked up when being inserted. This can be done later by referring to the records using their IDs:</p><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>curl --request POST \
  --url 'https://test.hubat.net/api/v2/data-link?records=6dcff611-45cb-49a9-82ca-318b9e5a3c17' \
  --header 'content-type: application/json' \
  --header 'x-auth-token: ACCESS_TOKEN' \
  --data '{}'
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript>var data = JSON.stringify({});

var xhr = new XMLHttpRequest();
xhr.withCredentials = true;

xhr.addEventListener(&quot;readystatechange&quot;, function () {
  if (this.readyState === this.DONE) {
    console.log(this.responseText);
  }
});

xhr.open(&quot;POST&quot;, &quot;https://test.hubat.net/api/v2/data-link?records=6dcff611-45cb-49a9-82ca-318b9e5a3c17&quot;);
xhr.setRequestHeader(&quot;content-type&quot;, &quot;application/json&quot;);
xhr.setRequestHeader(&quot;x-auth-token&quot;, &quot;ACCESS_TOKEN&quot;);

xhr.send(data);
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php>&lt;?php

$curl = curl_init();

curl_setopt_array($curl, array(
  CURLOPT_URL =&gt; &quot;https://test.hubat.net/api/v2/data-link?records=6dcff611-45cb-49a9-82ca-318b9e5a3c17&quot;,
  CURLOPT_RETURNTRANSFER =&gt; true,
  CURLOPT_ENCODING =&gt; &quot;&quot;,
  CURLOPT_MAXREDIRS =&gt; 10,
  CURLOPT_TIMEOUT =&gt; 30,
  CURLOPT_HTTP_VERSION =&gt; CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST =&gt; &quot;POST&quot;,
  CURLOPT_POSTFIELDS =&gt; &quot;{}&quot;,
  CURLOPT_HTTPHEADER =&gt; array(
    &quot;content-type: application/json&quot;,
    &quot;x-auth-token: ACCESS_TOKEN&quot;
  ),
));

$response = curl_exec($curl);
$err = curl_error($curl);

curl_close($curl);

if ($err) {
  echo &quot;cURL Error #:&quot; . $err;
} else {
  echo $response;
}
</code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python>import requests

url = &quot;https://test.hubat.net/api/v2/data-link&quot;

payload = &quot;{}&quot;
headers = {
    'content-type': &quot;application/json&quot;,
    'x-auth-token': &quot;ACCESS_TOKEN&quot;
    }

response = requests.request(&quot;POST&quot;, url, data=payload, headers=headers)

print(response.text)
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby>require 'uri'
require 'net/http'

url = URI(&quot;https://test.hubat.net/api/v2/data-link?records=6dcff611-45cb-49a9-82ca-318b9e5a3c17&quot;)

http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

request = Net::HTTP::Post.new(url)
request[&quot;content-type&quot;] = 'application/json'
request[&quot;x-auth-token&quot;] = 'ACCESS_TOKEN'
request.body = &quot;{}&quot;

response = http.request(request)
puts response.read_body
</code></pre></div></div><nav class=pager-nav><a href="./">Previous Step: Overview</a> <a href=02-data-retrieval.html>Next Step: Data Retrieval</a></nav><hr><section class=copyright><div class=page-wrap><div><span>© 2017 HAT Data Exchange Ltd.</span> <a href=/sitemap>Sitemap</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="https://hubofallthings.com/main/cookie-policy/">Cookie Policy</a></div></div></section></section></div></div></div><script src=//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script>window.jQuery || document.write('<script src="/_bower_components/jquery/jquery.min.js"><\/script>')</script><script src=/js/script.f334.js></script></body></html>